---
title: "AI Agents integration"
description: "Learn how to integrate Nevermined Payments Library with your AI agents."
icon: "laptop"
---

Integrating Nevermined Payments Library with your existing AI Agents is a straightforward process that can be accomplished with just a few steps.

<Note>
  In this page we are going to describe the whole process, but if you have any
  question feel free to contact us.
</Note>

## Step-by-step Tutorial

In this tutorial we are going to use a client application sending requests to an AI Agent (Weather MCP server). This MCP server will be only accessible by users who purchased the access to it.

During the tutorial we are going to see how the client application can be connected to Nevermined, how a user can purchase access to the MCP server, and how the requests can be send to it. Finally we will see how the MCP server can authorize user requests processing only the prompts sent by subscribed users.

### 1. Generate the NVM API Keys

Create a new Nevermined API Key is a simple process that can be done via the [Nevermined App](https://nevermined.app):

<Note>
  Do this process two times, we are gonna need one API Key for the client
  application and another one for the MCP server.
</Note>

1. Go to the [Nevermined App](https://nevermined.app) and log in using your credentials.
2. Navigate to the [API Keys](https://nevermined.app/api-keys) section.
3. Click on "New API Key".
4. Give it a name and set the desired permissions. Click on "Generate API Key" button.
5. Copy the generated API key and store it securely.

<Warning>
  Typically each key will be generated by different accounts, but for sake of
  simplicity we will use the same account for both.
</Warning>

### 2. Setup the client application

<Note>
LINK TO THE CLIENT CODE
</Note>

First we are going to install the Payments Libraries in the client application:

<Tabs>
  <Tab title="TypeScript">```bash yarn add @nevermined-io/payments ```</Tab>
  <Tab title="Python">```bash pip install -e payments-py ```</Tab>
</Tabs>

And later we are going to configure the Payments Library and connect to Nevermined. We are going to use here **the first of the API Keys** generated in the previous step.

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    import { Payments } from '@nevermined-io/payments'
    
    const payments = Payments.getInstance({
      nvmApiKey: process.env.NVM_API_KEY,
      environment: 'sandbox'
    })
    ```
  </Tab>
  <Tab title="Python">
    ```python
    from payments_py import Payments
    import os
    
    payments = Payments(
        api_key=os.environ.get('NVM_API_KEY'),
        environment='sandbox' 
    )
    ```
  </Tab>
</Tabs>

### 3. Setup the AI Agent

<Note>
LINK TO THE AI AGENT CODE
</Note>

We need to repeat the previous step but now for the AI Agent. This involves installing the Payments Library and connecting it with **the second API Key** we generated before.

### 4. Purchase Access to the MCP Server

Once the client application is set up, the next step is to allow users to purchase access to the MCP server. This can be done using the Nevermined App or the Payments Library.

<Note>
LINK TO THE PAYMENT PLAN HERE
</Note>

### 4. Configure the AI Agent to validate client requests



### 5. Configure the AI Agent to redeem the credits used

### 6. Configure the AI Agent to log the observability metrics

### 7. Make the client application interact with the agent



## Full Code Examples

You can find the complete working examples used in this tutorial in the following GitHub repositories:

- **Python**: [nevermined-io/weather-mcp-demo-py](https://github.com/nevermined-io/weather-mcp-demo-py)
- **TypeScript**: [nevermined-io/weather-mcp-demo](https://github.com/nevermined-io/weather-mcp-demo)
