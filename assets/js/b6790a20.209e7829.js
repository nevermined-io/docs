(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6782],{91262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(67294),o=n(72389);function r(e){let{children:t,fallback:n}=e;return(0,o.Z)()?a.createElement(a.Fragment,null,null==t?void 0:t()):n??null}},40322:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i,e:()=>r});var a=n(54522),o=n(16999);const r=()=>({web3ProviderUri:"https://matic-mumbai.chainstacklabs.com",neverminedNodeUri:"https://node.mumbai.public.nevermined.network",verbose:2,neverminedNodeAddress:"0x5838B5512cF9f12FE9f2beccB20eb47211F9B0bc",graphHttpUri:"https://api.thegraph.com/subgraphs/name/nevermined-io/public",marketplaceAuthToken:a.AuthToken.fetchMarketplaceApiTokenFromLocalStorage().token,marketplaceUri:"https://marketplace-api.mumbai.public.nevermined.network",artifactsFolder:`${location.protocol}//${location.host}/contracts`}),i=[o.Dn.v8]},1244:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>C,contentTitle:()=>N,default:()=>T,frontMatter:()=>y,metadata:()=>E,toc:()=>_});var a=n(87462),o=n(67294),r=n(3905),i=n(91262),l=n(54396),s=(n(54522),n(16999),n(76798));const c={demo:"demo_Zn5S",demo__container:"demo__container_XKdI",demo__mint:"demo__mint_AxLE",demo__detail:"demo__detail_XQyo",demo__ddo:"demo__ddo_uikf",demo__buy:"demo__buy_dGjE"};var d=n(40322);(0,s.CY)("demo",c);var m=n(19485),u=n(241),p=n(82169);const h=(0,s.CY)("demo",c);l.Logger.setLevel(3);const k=async(e,t)=>{const n=await e.utils.jwt.generateClientAssertion(t);await e.services.marketplace.login(n)},w=e=>{let{onPublish:t}=e;return o.createElement(o.Fragment,null,o.createElement(s.wg,{className:h("mint"),type:"secondary",onClick:t},"mint"))},g=e=>{let{ddo:t}=e;return o.createElement(o.Fragment,null,o.createElement(s.AH,null,o.createElement(s.II,{className:h("detail"),variants:["bold"]},"Asset ",t.id.slice(0,10),"...:")),o.createElement(s.II,{className:h("ddo"),variants:["detail"]},JSON.stringify(t)))},f=e=>{let{ddo:t,sdk:n,account:a}=e;const[r,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),[m,u]=(0,o.useState)("");(0,o.useEffect)((()=>{(async()=>{const e=await n.nfts1155.balance(t.id,a),o=l.BigNumber.from(e).toNumber();i(o>0),u(await n.assets.owner(t.id))})()}),[a,c]);return o.createElement(s.AH,{className:h("buy")},r?o.createElement(s.wg,{type:"secondary",onClick:async()=>{try{await n.nfts1155.access(t.id,a)}catch(e){l.Logger.error(e)}}},"Download NFT"):m!==a.getId()?o.createElement(s.wg,{type:"secondary",onClick:async()=>{await k(n,a);try{const e=await n.nfts1155.order(t.id,l.BigNumber.from(1),a),o=await n.nfts1155.transferForDelegate(e,m,a.getId(),l.BigNumber.from(1),1155);d(Boolean(o))}catch(e){l.Logger.error(e)}}},"buy"):o.createElement("span",null,"The owner cannot buy, please change the account to buy the NFT asset"))},v=e=>{let{config:t}=e;const[n,a]=(0,o.useState)({}),[r,i]=(0,o.useState)(void 0),[c,d]=(0,o.useState)({}),[p,v]=(0,o.useState)("");(0,o.useEffect)((()=>{var e,t;null==(e=window)||null==(t=e.ethereum)||t.on("accountsChanged",(e=>{e&&e.length>0?v(m.getAddress(e[0])):(v(""),console.log("No Account found!"))})),(async()=>{const e=new u.Q(window.ethereum),t=await e.listAccounts();v(null!=t&&t.length?m.getAddress(t[0]):"")})()}),[]),(0,o.useEffect)((()=>{p&&(async()=>{try{const e=await l.Nevermined.getInstance(t),n=await e.accounts.list();i(n[0]),a(e)}catch(e){console.log(e)}})()}),[p]);return o.createElement("div",{className:h("container")},o.createElement(s.AH,null,r?o.createElement(o.Fragment,null,o.createElement(s.II,{variants:["bold"],className:h("detail")},"Wallet address:"),o.createElement(s.II,null,r.getId())):o.createElement(s.wg,{type:"secondary",onClick:async()=>{var e,t;const n=await(null==(e=window)||null==(t=e.ethereum)||null==t.request?void 0:t.request({method:"eth_requestAccounts"}));v(m.getAddress(n[0]))}},"Connect To MM"),p&&!c.id&&o.createElement(w,{onPublish:async()=>{try{const e=new Map([[r.getId(),l.BigNumber.from(1)]]),a=new l.AssetPrice(e),o={royaltyKind:l.RoyaltyKind.Standard,scheme:(0,l.getRoyaltyScheme)(n,l.RoyaltyKind.Standard),amount:0},i=await n.keeper.nvmConfig.getNetworkFee(),s=await n.keeper.nvmConfig.getFeeReceiver();a.addNetworkFees(s,l.BigNumber.from(i)),a.setTokenAddress("0x2058A9D7613eEE744279e3856Ef0eAda5FCbaA7e");const c={main:{name:"",files:[{index:0,contentType:"application/json",url:"https://uploads5.wikiart.org/00268/images/william-holbrook-beard/the-bear-dance-1870.jpg"}],type:"dataset",author:"",license:"",dateCreated:(new Date).toISOString()}};await k(n,r);const m=await(async(e,t,a,o,r)=>{const i=l.NFTAttributes.getNFT1155Instance({metadata:a,serviceTypes:["nft-sales","nft-access"],amount:l.BigNumber.from(1),cap:l.BigNumber.from(100),royaltyAttributes:o,preMint:!0,nftContractAddress:n.nfts1155.nftContract.address,providers:[e],price:r});return await n.nfts1155.create(i,t)})(t.neverminedNodeAddress,r,c,o,a);d(m)}catch(e){console.log("error",e)}}}),(null==c?void 0:c.id)&&o.createElement(o.Fragment,null,o.createElement(g,{ddo:c}),o.createElement(f,{ddo:c,sdk:n,account:r}))))},b=()=>{var e;const t=(0,d.e)();return t.web3Provider="undefined"!=typeof window?null==(e=window)?void 0:e.ethereum:new p.r("https://matic-mumbai.chainstacklabs.com"),o.createElement(o.Fragment,null,o.createElement(v,{config:t}))},y={sidebar_position:6},N="Demo",E={unversionedId:"nevermined-sdk/demo",id:"nevermined-sdk/demo",title:"Demo",description:"This demo is based in the code of the Example section",source:"@site/docs/nevermined-sdk/demo.md",sourceDirName:"nevermined-sdk",slug:"/nevermined-sdk/demo",permalink:"/docs/nevermined-sdk/demo",draft:!1,editUrl:"https://github.com/nevermined-io/docs/tree/main/docs/nevermined-sdk/demo.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Compute Example",permalink:"/docs/nevermined-sdk/compute-example"},next:{title:"Account",permalink:"/docs/nevermined-sdk/api-reference/classes/Account"}},C={},_=[{value:"Workflow example",id:"workflow-example",level:2},{value:"View",id:"view",level:2}],A={toc:_};function T(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},A,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"demo"},"Demo"),(0,r.kt)("p",null,"This demo is based in the code of the ",(0,r.kt)("a",{parentName:"p",href:"/docs/nevermined-sdk/example"},"Example")," section"),(0,r.kt)("h2",{id:"workflow-example"},"Workflow example"),(0,r.kt)("p",null,"The example in the template covers the most commonsly used functionalities to interact with NFT1155."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Requirements:")," The account wallet used for the example must have ",(0,r.kt)("inlineCode",{parentName:"p"},"Matic")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"USDC"),", see ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorials/faucets"},"here")," how you can get balance."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Connect the wallet"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("inlineCode",{parentName:"li"},"Mint")," button, approve the transaction and sign the authorization request in the wallet."),(0,r.kt)("li",{parentName:"ol"},"Once the token is minted the ",(0,r.kt)("inlineCode",{parentName:"li"},"Mint")," button will change to ",(0,r.kt)("inlineCode",{parentName:"li"},"Download NFT"),"."),(0,r.kt)("li",{parentName:"ol"},"Click on ",(0,r.kt)("inlineCode",{parentName:"li"},"Download NFT")," to retrieve the example asset (in this case it is a JSON file)"),(0,r.kt)("li",{parentName:"ol"},"Change the account in the wallet"),(0,r.kt)("li",{parentName:"ol"},"Click on the ",(0,r.kt)("inlineCode",{parentName:"li"},"Buy")," button and approve the transaction and sign the authorization request in the wallet"),(0,r.kt)("li",{parentName:"ol"},"Upon purchasing the token the ",(0,r.kt)("inlineCode",{parentName:"li"},"Buy")," button will change to ",(0,r.kt)("inlineCode",{parentName:"li"},"Download NFT")),(0,r.kt)("li",{parentName:"ol"},"Repeat step 4")),(0,r.kt)("p",null,"::: caution\nThe data is not static, once the browser is reloaded the workflow example will restart.\n:::"),(0,r.kt)("h2",{id:"view"},"View"),(0,r.kt)(i.Z,{fallback:(0,r.kt)("div",null,"Loading demo..."),mdxType:"BrowserOnly"},(()=>(0,r.kt)(b,{mdxType:"DemoSDK"}))))}T.isMDXComponent=!0},33686:()=>{},39679:()=>{},80950:()=>{},77611:()=>{},88621:()=>{},46601:()=>{},89214:()=>{},96419:()=>{},56353:()=>{},8623:()=>{},7748:()=>{},27790:()=>{},85568:()=>{},95979:()=>{},69386:()=>{},31616:()=>{},29120:()=>{},46586:()=>{},56619:()=>{},77108:()=>{},82825:()=>{},69862:()=>{},40964:()=>{}}]);