(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6782],{91262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(67294),o=n(72389);function r(e){let{children:t,fallback:n}=e;return(0,o.Z)()?a.createElement(a.Fragment,null,null==t?void 0:t()):n??null}},40322:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s,e:()=>r});var a=n(54522),o=n(16999);const r=()=>({web3ProviderUri:"https://matic-mumbai.chainstacklabs.com",neverminedNodeUri:"https://node.mumbai.public.nevermined.network",verbose:2,neverminedNodeAddress:"0x5838B5512cF9f12FE9f2beccB20eb47211F9B0bc",graphHttpUri:"https://api.thegraph.com/subgraphs/name/nevermined-io/public",marketplaceAuthToken:a.AuthToken.fetchMarketplaceApiTokenFromLocalStorage().token,marketplaceUri:"https://marketplace-api.mumbai.public.nevermined.network",artifactsFolder:`${location.protocol}//${location.host}/contracts`}),s=[o.Dn.v8]},14639:(e,t,n)=>{"use strict";n.d(t,{z:()=>b,o:()=>I});var a=n(67294),o=n(54396),r=n(54522),s=n(16999),l=n(76798),i=n(82169);const c={demo:"demo_Zn5S",demo__container:"demo__container_XKdI",demo__mint:"demo__mint_AxLE",demo__detail:"demo__detail_XQyo",demo__ddo:"demo__ddo_uikf",demo__buy:"demo__buy_dGjE"};var d=n(40322);const m=(0,l.CY)("demo",c),u=()=>{const{sdk:e,isLoadingSDK:t}=r.Catalog.useNevermined();return a.createElement(a.Fragment,null,a.createElement(l.AH,null,a.createElement(l.II,{className:m("detail"),variants:["bold"]},"Is Loading SDK:"),a.createElement(l.II,{className:m("detail")},t?"Yes":"No")),a.createElement(l.AH,null,a.createElement(l.II,{variants:["bold"],className:m("detail")},"Is SDK Avaialable:"),a.createElement(l.II,{className:m("detail")},e&&Object.keys(e).length>0?"Yes":"No")))},p=e=>{let{ddo:t}=e;return a.createElement(a.Fragment,null,a.createElement(l.AH,null,a.createElement(l.II,{className:m("detail"),variants:["bold"]},"Asset ",t.id.slice(0,10),"...:")),a.createElement(l.II,{className:m("ddo"),variants:["detail"]},JSON.stringify(t)))},g=e=>{let{onPublish:t}=e;const{assets:n}=r.Catalog.useNevermined();return a.createElement(a.Fragment,null,a.createElement(l.wg,{type:"secondary",onClick:t,disabled:!Object.keys(n).length},"mint"))},h=e=>{let{ddo:t}=e;const{assets:n,account:i,isLoadingSDK:c,nfts:d,sdk:u}=r.Catalog.useNevermined(),{walletAddress:p}=(0,s.Os)(),[g,h]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[b,v]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{h(await i.isNFT1155Holder(t.id,p)),v(await u.assets.owner(t.id))})()}),[p,w]);return a.createElement(l.AH,{className:m("buy")},g?a.createElement(l.wg,{type:"secondary",onClick:async()=>{console.log(t.id),await n.downloadNFT({did:t.id})},disabled:c},"Download NFT"):b!==p?a.createElement(l.wg,{type:"secondary",onClick:async()=>{const e=await d.access({did:t.id,nftHolder:b,nftAmount:o.BigNumber.from(1),ercType:1155});k(Boolean(e))},disabled:c},"buy"):a.createElement("span",null,"The owner cannot buy, please change the account to buy the NFT asset"))},w=()=>{const{login:e,walletAddress:t,getConnectors:n}=(0,s.Os)();return a.createElement(l.AH,null,a.createElement(l.II,{variants:["bold"],className:m("detail")},"Wallet address:"),a.createElement(l.II,null,t),!t&&a.createElement(l.wg,{type:"secondary",onClick:()=>e(n()[0])},"Connect To MM"))},k=e=>{let{config:t}=e;const{isLoadingSDK:n,sdk:l}=r.Catalog.useNevermined(),{publishNFT1155:i}=r.AssetService.useAssetPublish(),{walletAddress:c}=(0,s.Os)(),[d,k]=(0,a.useState)({});o.Logger.setLevel(3);const b={main:{name:"",files:[{index:0,contentType:"application/json",url:"https://uploads5.wikiart.org/00268/images/william-holbrook-beard/the-bear-dance-1870.jpg"}],type:"dataset",author:"",license:"",dateCreated:(new Date).toISOString()}};return a.createElement("div",{className:m("container")},a.createElement(u,null),a.createElement(w,null),c&&!d.id&&a.createElement(g,{onPublish:async()=>{try{const e=new Map([[c,o.BigNumber.from(1)]]),n=new o.AssetPrice(e),a=await l.keeper.nvmConfig.getNetworkFee(),s=await l.keeper.nvmConfig.getFeeReceiver();n.addNetworkFees(s,o.BigNumber.from(a)),n.setTokenAddress("0x2058A9D7613eEE744279e3856Ef0eAda5FCbaA7e");const d={royaltyKind:r.RoyaltyKind.Standard,scheme:(0,r.getRoyaltyScheme)(l,r.RoyaltyKind.Standard),amount:0},m=r.NFTAttributes.getNFT1155Instance({metadata:b,serviceTypes:["nft-sales","nft-access"],amount:o.BigNumber.from(1),cap:o.BigNumber.from(100),royaltyAttributes:d,preMint:!0,nftContractAddress:l.nfts1155.nftContract.address,providers:[t.neverminedNodeAddress],price:n}),u=await i({nftAttributes:m});k(u)}catch(e){console.log("error",e)}}}),!n&&(null==d?void 0:d.id)&&a.createElement(a.Fragment,null,a.createElement(p,{ddo:d}),a.createElement(h,{ddo:d})))},b=()=>{var e;const t=(0,d.e)();t.web3Provider="undefined"!=typeof window?null==(e=window)?void 0:e.ethereum:new i.r("https://matic-mumbai.chainstacklabs.com");const n=s.xv.createClient(s.p$.getDefaultClient({appName:"demo",chains:d.Y,autoConnect:!0}));return a.createElement(r.Catalog.NeverminedProvider,{config:t,verbose:!0},a.createElement(r.AssetService.AssetPublishProvider,null,a.createElement(s.nS,{client:n,correctNetworkId:80001},a.createElement(k,{config:t}))))};var v=n(19485),f=n(241);const y=(0,l.CY)("demo",c);o.Logger.setLevel(3);const N=async(e,t)=>{const n=await e.utils.jwt.generateClientAssertion(t);await e.services.marketplace.login(n)},E=e=>{let{onPublish:t}=e;return a.createElement(a.Fragment,null,a.createElement(l.wg,{className:y("mint"),type:"secondary",onClick:t},"mint"))},C=e=>{let{ddo:t}=e;return a.createElement(a.Fragment,null,a.createElement(l.AH,null,a.createElement(l.II,{className:y("detail"),variants:["bold"]},"Asset ",t.id.slice(0,10),"...:")),a.createElement(l.II,{className:y("ddo"),variants:["detail"]},JSON.stringify(t)))},A=e=>{let{ddo:t,sdk:n,account:r}=e;const[s,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{const e=await n.nfts1155.balance(t.id,r),a=o.BigNumber.from(e).toNumber();i(a>0),u(await n.assets.owner(t.id))})()}),[r,c]);return a.createElement(l.AH,{className:y("buy")},s?a.createElement(l.wg,{type:"secondary",onClick:async()=>{try{await n.nfts1155.access(t.id,r)}catch(e){o.Logger.error(e)}}},"Download NFT"):m!==r.getId()?a.createElement(l.wg,{type:"secondary",onClick:async()=>{await N(n,r);try{const e=await n.nfts1155.order(t.id,o.BigNumber.from(1),r),a=await n.nfts1155.transferForDelegate(e,m,r.getId(),o.BigNumber.from(1),1155);d(Boolean(a))}catch(e){o.Logger.error(e)}}},"buy"):a.createElement("span",null,"The owner cannot buy, please change the account to buy the NFT asset"))},F=e=>{let{config:t}=e;const[n,r]=(0,a.useState)({}),[s,i]=(0,a.useState)(void 0),[c,d]=(0,a.useState)({}),[m,u]=(0,a.useState)("");(0,a.useEffect)((()=>{var e,t;null==(e=window)||null==(t=e.ethereum)||t.on("accountsChanged",(e=>{e&&e.length>0?u(v.getAddress(e[0])):(u(""),console.log("No Account found!"))})),(async()=>{const e=new f.Q(window.ethereum),t=await e.listAccounts();u(null!=t&&t.length?v.getAddress(t[0]):"")})()}),[]),(0,a.useEffect)((()=>{m&&(async()=>{try{const e=await o.Nevermined.getInstance(t),n=await e.accounts.list();i(n[0]),r(e)}catch(e){console.log(e)}})()}),[m]);return a.createElement("div",{className:y("container")},a.createElement(l.AH,null,s?a.createElement(a.Fragment,null,a.createElement(l.II,{variants:["bold"],className:y("detail")},"Wallet address:"),a.createElement(l.II,null,s.getId())):a.createElement(l.wg,{type:"secondary",onClick:async()=>{var e,t;const n=await(null==(e=window)||null==(t=e.ethereum)||null==t.request?void 0:t.request({method:"eth_requestAccounts"}));u(v.getAddress(n[0]))}},"Connect To MM"),m&&!c.id&&a.createElement(E,{onPublish:async()=>{try{const e=new Map([[s.getId(),o.BigNumber.from(1)]]),a=new o.AssetPrice(e),r={royaltyKind:o.RoyaltyKind.Standard,scheme:(0,o.getRoyaltyScheme)(n,o.RoyaltyKind.Standard),amount:0},l=await n.keeper.nvmConfig.getNetworkFee(),i=await n.keeper.nvmConfig.getFeeReceiver();a.addNetworkFees(i,o.BigNumber.from(l)),a.setTokenAddress("0x2058A9D7613eEE744279e3856Ef0eAda5FCbaA7e");const c={main:{name:"",files:[{index:0,contentType:"application/json",url:"https://uploads5.wikiart.org/00268/images/william-holbrook-beard/the-bear-dance-1870.jpg"}],type:"dataset",author:"",license:"",dateCreated:(new Date).toISOString()}};await N(n,s);const m=await(async(e,t,a,r,s)=>{const l=o.NFTAttributes.getNFT1155Instance({metadata:a,serviceTypes:["nft-sales","nft-access"],amount:o.BigNumber.from(1),cap:o.BigNumber.from(100),royaltyAttributes:r,preMint:!0,nftContractAddress:n.nfts1155.nftContract.address,providers:[e],price:s});return await n.nfts1155.create(l,t)})(t.neverminedNodeAddress,s,c,r,a);d(m)}catch(e){console.log("error",e)}}}),(null==c?void 0:c.id)&&a.createElement(a.Fragment,null,a.createElement(C,{ddo:c}),a.createElement(A,{ddo:c,sdk:n,account:s}))))},I=()=>{var e;const t=(0,d.e)();return t.web3Provider="undefined"!=typeof window?null==(e=window)?void 0:e.ethereum:new i.r("https://matic-mumbai.chainstacklabs.com"),a.createElement(a.Fragment,null,a.createElement(F,{config:t}))}},52981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>c,toc:()=>m});var a=n(87462),o=(n(67294),n(3905)),r=n(91262),s=n(14639);const l={sidebar_position:6},i="Demo",c={unversionedId:"nevermined-sdk/demo",id:"nevermined-sdk/demo",title:"Demo",description:"This demo is based in the code of the Example section",source:"@site/docs/nevermined-sdk/demo.md",sourceDirName:"nevermined-sdk",slug:"/nevermined-sdk/demo",permalink:"/docs/nevermined-sdk/demo",draft:!1,editUrl:"https://github.com/nevermined-io/docs/tree/main/docs/nevermined-sdk/demo.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Compute Example",permalink:"/docs/nevermined-sdk/compute-example"},next:{title:"Account",permalink:"/docs/nevermined-sdk/api-reference/classes/Account"}},d={},m=[{value:"Workflow example",id:"workflow-example",level:2},{value:"View",id:"view",level:2}],u={toc:m};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"demo"},"Demo"),(0,o.kt)("p",null,"This demo is based in the code of the ",(0,o.kt)("a",{parentName:"p",href:"/docs/nevermined-sdk/example"},"Example")," section"),(0,o.kt)("h2",{id:"workflow-example"},"Workflow example"),(0,o.kt)("p",null,"The example in the template covers the most commonsly used functionalities to interact with NFT1155."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Requirements:")," The account wallet used for the example must have ",(0,o.kt)("inlineCode",{parentName:"p"},"Matic")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"USDC"),", see ",(0,o.kt)("a",{parentName:"p",href:"/docs/tutorials/faucets"},"here")," how you can get balance."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Connect the wallet"),(0,o.kt)("li",{parentName:"ol"},"Click the ",(0,o.kt)("inlineCode",{parentName:"li"},"Mint")," button, approve the transaction and sign the authorization request in the wallet."),(0,o.kt)("li",{parentName:"ol"},"Once the token is minted the ",(0,o.kt)("inlineCode",{parentName:"li"},"Mint")," button will change to ",(0,o.kt)("inlineCode",{parentName:"li"},"Download NFT"),"."),(0,o.kt)("li",{parentName:"ol"},"Click on ",(0,o.kt)("inlineCode",{parentName:"li"},"Download NFT")," to retrieve the example asset (in this case it is a JSON file)"),(0,o.kt)("li",{parentName:"ol"},"Change the account in the wallet"),(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("inlineCode",{parentName:"li"},"Buy")," button and approve the transaction and sign the authorization request in the wallet"),(0,o.kt)("li",{parentName:"ol"},"Upon purchasing the token the ",(0,o.kt)("inlineCode",{parentName:"li"},"Buy")," button will change to ",(0,o.kt)("inlineCode",{parentName:"li"},"Download NFT")),(0,o.kt)("li",{parentName:"ol"},"Repeat step 4")),(0,o.kt)("p",null,"::: caution\nThe data is not static, once the browser is reloaded the workflow example will restart.\n:::"),(0,o.kt)("h2",{id:"view"},"View"),(0,o.kt)(r.Z,{fallback:(0,o.kt)("div",null,"Loading demo..."),mdxType:"BrowserOnly"},(()=>(0,o.kt)(s.o,{mdxType:"DemoSDK"}))))}p.isMDXComponent=!0},33686:()=>{},39679:()=>{},80950:()=>{},77611:()=>{},88621:()=>{},46601:()=>{},89214:()=>{},96419:()=>{},56353:()=>{},8623:()=>{},7748:()=>{},27790:()=>{},85568:()=>{},95979:()=>{},69386:()=>{},31616:()=>{},29120:()=>{},46586:()=>{},56619:()=>{},77108:()=>{},82825:()=>{},69862:()=>{},40964:()=>{}}]);